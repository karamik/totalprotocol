const VERCEL_API = 'https://totalprotocol.vercel.app/api/status';

function updateUI(data) {
    // Ищем элементы. Если их нет - создаем или выводим в консоль
    const entropyEl = document.getElementById('entropy-display');
    const finalityEl = document.getElementById('ms-value');
    const terminalEl = document.getElementById('terminal-text');

    if (entropyEl) entropyEl.innerText = data.entropy;
    if (finalityEl) finalityEl.innerText = data.finality.toFixed(4);
    if (terminalEl) terminalEl.innerText = "SENTINEL STATUS: ACTIVE | " + data.entropy;
    
    console.log("Sync OK:", data.entropy);
}

async function startSync() {
    try {
        const response = await fetch(VERCEL_API);
        const data = await response.json();
        updateUI(data);
    } catch (e) {
        console.log("Sync Error");
    }
}

// Запуск каждые 1.5 секунды
setInterval(startSync, 1500);
startSync();
